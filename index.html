
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EV6 Planner</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <script defer src="app.js"></script>
</head>
<body>
  <header class="app-header">
    <h1>Planificateur Recharge Kia EV6</h1>
    <p class="subtitle">Connexion Microsoft locale (aucune info publiée), calendrier Outlook et planification</p>
  </header>

  <div class="container">
    <!-- Connexion Outlook -->
    <div class="card">
      <h2>Connexion Outlook</h2>
      <div class="row">
        <button id="loginBtn" class="btn primary">Se connecter</button>
        <button id="logoutBtn" class="btn" style="display:none">Se déconnecter</button>
      </div>
      <div id="events" class="list" style="margin-top:12px"></div>
    </div>

    <!-- Paramètres locaux (stockés sur iOS en IndexedDB) -->
    <div class="card">
      <h2>Paramètres (stockage local iOS)</h2>
      <p class="subtitle">Ces paramètres ne quittent jamais votre appareil. Vous pouvez les modifier ou les importer ci‑dessous.</p>
      <div class="grid-2">
        <label>
          Client ID Microsoft (non secret)
          <input id="cfgClientId" type="text" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" />
        </label>
        <label>
          Tenant (ex.: contoso.com ou ID) — optionnel
          <input id="cfgTenant" type="text" placeholder="common" />
        </label>
      </div>
      <div class="grid-2" style="margin-top:8px">
        <label>
          Clé HuggingFace (facultatif)
          <input id="cfgHfKey" type="password" placeholder="hf_..." />
        </label>
        <label>
          Passphrase locale (chiffre la clé HF)
          <input id="cfgPass" type="password" placeholder="••••••" />
        </label>
      </div>
      <div class="row" style="margin-top:10px">
        <button id="saveCfgBtn" class="btn primary">Enregistrer localement</button>
        <input id="importCfgFile" type="file" accept="application/json" style="display:none" />
        <button id="importCfgBtn" class="btn">Importer JSON…</button>
        <button id="exportCfgBtn" class="btn">Exporter JSON (chiffré)</button>
      </div>
      <div id="cfgStatus" class="details" style="margin-top:10px">Aucun paramètre trouvé — veuillez renseigner le Client ID.</div>
    </div>

    <!-- Stratégie de recharge -->
    <div class="card">
      <h2>Stratégie de recharge</h2>
      <div id="strategy" class="details">En attente de calcul…</div>
    </div>

    <!-- Conseil IA -->
    <div class="card">
      <h2>Conseil IA</h2>
      <div id="aiAdvice" class="details">En attente…</div>
    </div>
  </div>

  <footer class="app-footer">EV6Planner © 2025</footer>
</body>
</html>
